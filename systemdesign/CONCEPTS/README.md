# Interesting concepts
- Consistency and Availability
  - CAP
  - PACLELC : https://www.cs.umd.edu/~abadi/papers/abadi-pacelc.pdf
    - Examples
      - PA/EL systems: if a partition occurs, they give up consistency for availability, and under normal operation they still give up consistency for lower latency.
        - default versions of Dynamo, Cassandra, and Riak
      - PA/EC systems: MongODB
      - PC/EL systems: PNUTS: In normal operation, it gives up consistency for latency; however, if a partition occurs, it trades availability for consistency.
      - PC/EC systems: HBase/BigTable + Fully ACID systems refuse to give up consistency, and will pay the availability and latency costs to achieve it.     
- Software Design patterns:
  - https://softwaredevelopmentinsights.com/10-software-architecture-and-design-patterns-ultimate-guide/
    - Layered Pattern
    - Master Slave
    - Client Slave
    - Event Driven
    - Broker
    - Event bus
    - MVC
    - Pipe filter
    - Blackboard
    - P2P
    - Interpreter
  - Others that I think are also present
    - Orchestrator : used in saga where there is a central coordinator
    - Choregrapher: used in saga where there is no central coordinator
    - Circuit Breaker pattern: Used by [shopify](https://shopify.engineering/building-resilient-payment-systems) to stop overloading the unhealthy service by giving up after n retries 
- Design principles
  - https://12factor.net/
  - [SOLID](https://en.wikipedia.org/wiki/SOLID) : mnemonic acronym for five design principles intended to make object-oriented designs more understandable, flexible, and maintainable.
    - Single responsibility Principle: every class should have only one responsibility
    - Open Closed Principle: Open for extension, but closed for modification
    - Liskov substitution principle
    - Interface segregation principle
    - Dependency inversion principle 
- Database Concepts
  - [ACID](https://en.wikipedia.org/wiki/ACID)
  - SQl vs NoSQL
  - Consistency patterns
  - Gossip Protocol 
  - Hinted Handoff
  - Sloppy Quorum
  - Transaction isolation levels
    - Read Uncommitted
    - Read Committed
    - Repeatable Read
    - Serializable
  - Isolation anomalies
    - Dirty Read
    - Non-Repeatable Read
    - Phantom Reads
  - Other anomalies
    - Write skew
      - Write skew happens when an update is made within a transaction based upon stale data.
      - Stale data is a value read by a transaction that has become stale due to a subsequent committed write from a concurrent transaction.
    - Lost Updates
      - Lost updates happen when a committed value written by one transaction is overwritten by a subsequent committed write from a concurrent transaction.
        - https://stackoverflow.com/questions/27826714/lost-update-vs-write-skew
        - https://www.cockroachlabs.com/blog/what-write-skew-looks-like/
        - https://www.codingblocks.net/podcast/lost-updates-and-write-skew/
  - Concurrency Control Mechanisms
  - CRDTs vs Operational Transformations
  - MVCC
 
- Probabilistic Data Structures
  - Quotient Filter : https://systemdesign.one/quotient-filter-explained/
    - Types of quotient filters 
      - Bloom Filter
      - Cuckoo Filter  
- [DHT](https://en.wikipedia.org/wiki/Distributed_hash_table) :  distributed system that provides a lookup service similar to a hash table.
  - Types of DHT
    - Consistent Hashing
    - Rendezvous Hashing / HRW (Highest Random Weight) / Jump Hashing
    - CAN/ Chord/Pastry/Tapestry   
- HTTP Versions
  - HTTP 1.0
    - 1996: each conn needs 3 way handshake
  - HTTP 1.1
    - 1997: introduced keepalive to reuse the same connection or persistent connections and
    - saves 3 way handshake for subsequent connections and pipelines them
    - but response must be received in the same order it is sent
    - also suffers HOL blocking viz. all subsequent connections impacted.  
  - HTTP 2.0
    - 2015 : multiple independent streams can be sent to same server in a same TCP connection
    - solved application HOL blocking but TCP HOL still remains
    - also introduced compressed headers
    - push capability from servers whenever new content needs to be sent to clients 
  - HTTP 3.0
    - 2022 : introduces QUIC over UDP: streams at TCP, no addl handshakes needed
    - pkt loss on one stream doesnt affect another
    - for mobile heavy net usage, phone users switch from one n/w to another
    - QUIC (Quick UDP Internet Connections) has a connection id that allows devices to switch from one n/w to another.
  - See more at
    - https://hpbn.co/brief-history-of-http/ : High Performance Browser networking
    - https://medium.com/@sandeep4.verma/http-1-to-http-2-to-http-3-647e73df67a8
  - Related
    - SPDY
    - QUIC
    - SSE
    - RTC
    - WASM 
- [LSM Trees](https://en.wikipedia.org/wiki/Log-structured_merge-tree)
  - data structure that came on the scene in 1996 as an alternative to B+Trees(1970)
  - LSM suitable for high insert volume such as audit logs, debug trails and write-intensive workloads.
  - Refs
- Operations
  - commutative : if the ordering of events doesnt matter then its commutative.
    - example addition and multiplication are commutative, whereas subtraction and division are not
    - 3*9 is the same as 9*3 but 9/3 is not the same as 3/9
  - idempodent: where if the opertaion runs once or multiple times, the end result is the same.
    - eg. i = i+1 is not idempodent but i = 2 is idempodent
  - associativity: a associated with b means b is also associated with a
- Fault tolerance
  - Game days or storm days : should be done to simulate service failures like web|DNS|DB tier failures, node failures, AZ failures, Region failures every 3-6 months
  - For Devops , should closely track SLI, SLO, are well within SLA limits in terns of uptime, latency, jitter and accuracy.
    - Other patterns for fault management
      - Circuit breaker : to allow open / close of a service when isolating faults, after repeated timeouts call ckt breaker, later open slowly to prevent thundering herd problems
      - Runtime Knobs : the ability to rollback a new feature / behavior in production to RCA issues
      - Dead letter Queue: when a msg in msgq cant be processed for some reason say due to exception, then push into a dead letter DB / mortician database.
        - Once problem & fix is identified, republish the event.
  - Sys design patterns : https://www.youtube.com/watch?v=nH4qjmP2KEE 
    - Ambassador pattern: offloads tasks like logging monitoring, retries, enhances security. eg Envoy for k8s
    - Circuit Breaker pattern: prevents cascading failure
    - [CQRS](https://martinfowler.com/bliki/CQRS.html): separating reads from writes to allow each to scale independently
      - Useful where eventual consistency is needed and read load can impact writes
      - Not good for the core of a banking system or where strict consistency is needed.
    - Event Sourcing: keeping journal of live events eg. git commit history, change data capture, Pravega
    - Leader Election Pattern: Zookeeper, etc for distributed consistent config
    - Pub/Sub: eg. msg qs, Google Cloud Pub/Sub
    - Sharding pattern: distribute data across many nodes, reducing load eg. cassandra / Mongo
    - Outboxer pattern: maintains consistency between different services in a distributed system. eg. payments need to go to ledger and balance, chat msgs need to go to notifications and chatDB
    - Strangler Fig Pattern: to slowly replace a legacy system with a modern system. eg, slowly changing backend of a banking application, migrating from cloud <> on-prem
  - Models
    - Actor model: where an object has state and behavior. useful for scaling and high concurrence without race and deadlocks. eg. used by Erlang and Akka 
